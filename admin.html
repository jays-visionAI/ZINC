<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZYNK Admin Console</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin-filters.css?v=2">
    <link rel="stylesheet" href="admin-agents.css">
    <link rel="stylesheet" href="admin-status.css">
    <link rel="stylesheet" href="admin-detail.css">

    <!-- FontAwesome for Editor Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="admin-body">
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <h1>ZYNK</h1>
                <span class="admin-badge">Admin</span>
            </div>

            <nav class="admin-nav">
                <a href="#overview" class="admin-nav-item active" data-page="overview">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>Overview</span>
                </a>

                <a href="#users" class="admin-nav-item" data-page="users">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>Users</span>
                </a>

                <a href="#projects" class="admin-nav-item" data-page="projects">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>Projects</span>
                </a>

                <a href="#registry" class="admin-nav-item" data-page="registry">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                        </path>
                        <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                        <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                        <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                    <span>Agent Registry</span>
                </a>

                <a href="#playground" class="admin-nav-item" data-page="playground">
                    <span class="nav-icon">üß™</span>
                    Agent Playground
                </a>

                <a href="#vision-test" class="admin-nav-item" id="nav-vision-test" data-page="vision-test">
                    <span class="nav-icon">üëÅÔ∏è</span>
                    Vision QA Test
                </a>

                <a href="#monitoring" class="admin-nav-item" id="nav-monitoring">
                    <span class="nav-icon">üìä</span>
                    Monitoring
                </a>

                <!-- v5.0 DEPRECATED: Agent Team Template (replaced by Standard Agent Profiles in Admin Settings) -->
                <!--
                <a href="#agentteams" class="admin-nav-item" data-page="agentteams">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="8" r="3" />
                        <circle cx="6" cy="16" r="3" />
                        <circle cx="18" cy="16" r="3" />
                        <line x1="12" y1="11" x2="12" y2="13" />
                        <line x1="12" y1="13" x2="6" y2="13" />
                        <line x1="12" y1="13" x2="18" y2="13" />
                    </svg>
                    <span>Agent Team Template</span>
                </a>
                -->

                <!-- v5.0 DEPRECATED: Sub-Agents (replaced by Standard Agent Profiles in Admin Settings) -->
                <!--
                <a href="#subagents" class="admin-nav-item" data-page="subagents">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M3 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path>
                        <path d="M16 11h6m-3-3v6"></path>
                    </svg>
                    <span>Sub-Agents</span>
                </a>
                -->

                <a href="#channel-profiles" class="admin-nav-item" data-page="channel-profiles">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                    <span>Channel Profiles</span>
                </a>

                <!-- v5.0 DEPRECATED: Runtime Profiles (replaced by 5-Tier Global Routing in Admin Settings) -->
                <!--
                <a href="#runtime-profiles" class="admin-nav-item" data-page="runtime-profiles">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M12 1v6m0 6v6m5.2-13.2l-4.2 4.2m0 6l4.2 4.2M23 12h-6m-6 0H1m18.2 5.2l-4.2-4.2m0-6l4.2-4.2">
                        </path>
                    </svg>
                    <span>Runtime Profiles</span>
                </a>
                -->

                <a href="#runtime-performance" class="admin-nav-item" data-page="runtime-performance">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                    </svg>
                    <span>Runtime Performance</span>
                </a>


                <a href="#industries" class="admin-nav-item" data-page="industries">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                        </path>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                    <span>Industry Master</span>
                </a>

                <a href="#performance" class="admin-nav-item" data-page="performance">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 20V10"></path>
                        <path d="M18 20V4"></path>
                        <path d="M6 20v-4"></path>
                    </svg>
                    <span>Performance & KPI</span>
                </a>

                <a href="#documents" class="admin-nav-item" data-page="documents">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    <span>Documents</span>
                </a>

                <a href="#subscriptions" class="admin-nav-item" data-page="subscriptions">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
                        <line x1="12" y1="5" x2="12" y2="21"></line>
                        <path d="M7 5H17"></path>
                    </svg>
                    <span>Subscription MGT</span>
                </a>

                <a href="#chatbot" class="admin-nav-item" data-page="chatbot">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>AI Chatbot</span>
                </a>

                <a href="#pipeline" class="admin-nav-item" data-page="pipeline">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                    </svg>
                    <span>5-Step Pipeline</span>
                </a>

                <a href="#ui-menu" class="admin-nav-item" data-page="ui-menu">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="3" y1="9" x2="21" y2="9"></line>
                        <line x1="9" y1="21" x2="9" y2="9"></line>
                    </svg>
                    <span>UI & Menu MGT</span>
                </a>

                <a href="#settings" class="admin-nav-item" data-page="settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M12 1v6m0 6v6m5.2-13.2l-4.2 4.2m0 6l4.2 4.2M23 12h-6m-6 0H1m18.2 5.2l-4.2-4.2m0-6l4.2-4.2">
                        </path>
                    </svg>
                    <span>Settings</span>
                </a>
            </nav>

            <div class="admin-sidebar-footer">
                <button id="back-to-command-center" class="admin-btn-secondary">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Command Center
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <header class="admin-header">
                <div class="admin-header-left">
                    <h2 id="admin-page-title">Overview</h2>
                </div>
                <div class="admin-header-right">
                    <!-- Credit Display -->
                    <div class="admin-credit-display"
                        style="display: flex; align-items: center; gap: 8px; background: rgba(16, 224, 189, 0.1); border: 1px solid rgba(16, 224, 189, 0.2); padding: 4px 12px; border-radius: 20px; margin-right: 16px;">
                        <span
                            style="color: #16e0bd; font-size: 11px; font-weight: 700; text-transform: uppercase;">Credits</span>
                        <span id="user-credits"
                            style="color: #fff; font-size: 14px; font-weight: 700; font-family: 'JetBrains Mono', monospace;">0</span>
                        <span style="font-size: 14px;">ü™ô</span>
                    </div>
                    <div id="admin-user-profile" class="admin-user-profile"></div>
                </div>
            </header>

            <div id="admin-content" class="admin-content">
                <!-- Content will be loaded here dynamically -->
                <div class="admin-loading">Loading...</div>
            </div>
        </main>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-functions-compat.js"></script>

    <!-- Chart.js for Runtime Performance Dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Config & Scripts -->
    <script src="firebase-config.js"></script>
    <script src="env-config.js"></script>
    <script src="scripts/seed-credit-costs.js?v=20251128"></script> <!-- Added seeding script -->
    <!-- Version Management (must load first) -->
    <script src="scripts/version-management.js"></script>

    <!-- Runtime Profile Resolver (Must load before Orchestrator) -->
    <script src="utils-runtime-resolver.js"></script>

    <!-- LLM Router (Phase 2-2) -->
    <script src="scripts/llm-router.js?v=20251127"></script>
    <!-- Orchestrator (Phase 2-2) -->
    <script src="scripts/orchestrator-phase1.js?v=20251127_5"></script>

    <!-- Services -->
    <script src="services/llm-provider-service.js"></script>
    <script src="services/llm-router-service.js"></script>

    <!-- PRD 11.6 - LLM Models Seed Script -->
    <script src="scripts/seed-llm-models.js"></script>

    <!-- Services -->
    <script src="services/credit-service.js"></script>

    <!-- UI Loader (For Admin Menu Management) -->
    <script src="utils-ui-config.js"></script>
    <script src="utils-ui-loader.js"></script>
    <script src="utils-notifications.js"></script>

    <!-- Admin Core -->
    <script src="admin.js?v=20251126"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="admin-monitoring.js"></script>

    <!-- Workflow Engine Service -->
    <script src="/services/workflow-engine.js"></script>

    <!-- Workflow Canvas Builder Module -->
    <link rel="stylesheet" href="/workflow-canvas/workflow-canvas.css?v=20260110_01">
    <script src="/workflow-canvas/workflow-canvas.js?v=20260110_01"></script>
    <script>
        // Global function to open Workflow Canvas from any page
        function openWorkflowCanvas(context) {
            if (typeof WorkflowCanvas !== 'undefined') {
                WorkflowCanvas.open(context);
            } else {
                console.error('WorkflowCanvas module not loaded');
                alert('ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ï∫îÎ≤ÑÏä§Î•º Î°úÎìúÌïòÎäî Ï§ëÏûÖÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
            }
        }
    </script>

    <!-- Workflow Name Modal (Global) -->
    <div id="wf-name-modal" class="wf-name-modal" style="display:none;">
        <div class="wf-name-modal-backdrop" onclick="WorkflowCanvas.cancelNameModal()"></div>
        <div class="wf-name-modal-content">
            <h3>ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ïù¥Î¶Ñ</h3>
            <input type="text" id="wf-name-input" placeholder="ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" value="My Workflow" />
            <div class="wf-name-modal-actions">
                <button class="wf-btn wf-btn-secondary" onclick="WorkflowCanvas.cancelNameModal()">Ï∑®ÏÜå</button>
                <button class="wf-btn wf-btn-primary" onclick="WorkflowCanvas.confirmNameModal()">Ï†ÄÏû•</button>
            </div>
        </div>
    </div>
    <style>
        .wf-name-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2000000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wf-name-modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .wf-name-modal-content {
            position: relative;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(0, 240, 255, 0.3);
            border-radius: 16px;
            padding: 24px;
            min-width: 400px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .wf-name-modal-content h3 {
            color: #fff;
            margin: 0 0 16px 0;
            font-size: 18px;
        }

        .wf-name-modal-content input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            outline: none;
            box-sizing: border-box;
        }

        .wf-name-modal-content input:focus {
            border-color: rgba(0, 240, 255, 0.5);
            box-shadow: 0 0 10px rgba(0, 240, 255, 0.2);
        }

        .wf-name-modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .wf-name-modal-actions .wf-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        .wf-name-modal-actions .wf-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .wf-name-modal-actions .wf-btn-primary {
            background: linear-gradient(135deg, #00f0ff 0%, #0099ff 100%);
            color: #000;
        }

        /* Delete Confirmation Modal */
        .wf-delete-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2000000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wf-delete-modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
        }

        .wf-delete-modal-content {
            position: relative;
            background: linear-gradient(135deg, #2a1a1a 0%, #1a1a2a 100%);
            border: 1px solid rgba(255, 100, 100, 0.3);
            border-radius: 16px;
            padding: 28px;
            min-width: 420px;
            box-shadow: 0 20px 60px rgba(255, 0, 0, 0.2);
        }

        .wf-delete-modal-content h3 {
            color: #ff6b6b;
            margin: 0 0 8px 0;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .wf-delete-modal-content p {
            color: rgba(255, 255, 255, 0.7);
            margin: 0 0 20px 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .wf-delete-modal-content .workflow-name {
            color: #fff;
            font-weight: 700;
            background: rgba(255, 100, 100, 0.2);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .wf-delete-modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .wf-delete-modal-actions .wf-btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        .wf-delete-modal-actions .wf-btn-cancel {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .wf-delete-modal-actions .wf-btn-delete {
            background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
            color: #fff;
        }

        .wf-delete-modal-actions .wf-btn-delete:hover {
            box-shadow: 0 0 20px rgba(255, 68, 68, 0.5);
        }
    </style>

    <!-- Delete Confirmation Modal (Global) -->
    <div id="wf-delete-modal" class="wf-delete-modal" style="display:none;">
        <div class="wf-delete-modal-backdrop" onclick="window.cancelDeleteModal()"></div>
        <div class="wf-delete-modal-content">
            <h3>‚ö†Ô∏è ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÏÇ≠Ï†ú</h3>
            <p>
                <span class="workflow-name" id="delete-workflow-name">ÏõåÌÅ¨ÌîåÎ°úÏö∞</span>Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?<br>
                Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.
            </p>
            <div class="wf-delete-modal-actions">
                <button class="wf-btn wf-btn-cancel" onclick="window.cancelDeleteModal()">Ï∑®ÏÜå</button>
                <button class="wf-btn wf-btn-delete" onclick="window.confirmDeleteModal()">ÏÇ≠Ï†ú</button>
            </div>
        </div>
    </div>
</body>

</html>