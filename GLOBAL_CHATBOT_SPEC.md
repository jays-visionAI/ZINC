# Global Chatbot Implementation Spec

## ë¬¸ì„œ ì •ë³´
- **ë¬¸ì„œëª…**: ZYNK AI ì±—ë´‡ ì „ì—­ ë°°í¬ ë° ê¸°ëŠ¥ í™•ì¥
- **ë²„ì „**: v1.0
- **ì‘ì„±ì¼**: 2024-12-09
- **ìƒíƒœ**: Implementation

---

## 1. ê°œìš”

### 1.1 ëª©í‘œ
- ìœ ì €ê°€ ë¡œê·¸ì¸ í›„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  í˜ì´ì§€ì— AI ì±—ë´‡ ë…¸ì¶œ
- í˜ì´ì§€ë³„ ì»¨í…ìŠ¤íŠ¸ ì¸ì‹ìœ¼ë¡œ ê´€ë ¨ ë„ì›€ë§ ì œê³µ
- ìŒì„± ì…ë ¥/ì¶œë ¥ ê¸°ëŠ¥ ì¶”ê°€
- Admin UIì—ì„œ í˜ì´ì§€ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬
- ë“œë˜ê·¸ ê°€ëŠ¥í•œ FAB ë²„íŠ¼ (ìœ„ì¹˜ ì €ì¥)

### 1.2 ë²”ìœ„

| êµ¬ë¶„ | í˜ì´ì§€ | ì±—ë´‡ |
|------|--------|------|
| âœ… ì ìš© | command-center, project-detail, brand-brain, knowledgeHub, marketPulse, strategyWarRoom, theFilter, theGrowth, studio | O |
| âŒ ì œì™¸ | admin*.html, index.html | X |

---

## 2. Firestore ìŠ¤í‚¤ë§ˆ

### 2.1 í˜ì´ì§€ ì»¨í…ìŠ¤íŠ¸
```
chatbotPageContext/{pageId}
â”œâ”€â”€ pageId: "brand-brain"           // í˜ì´ì§€ ì‹ë³„ì
â”œâ”€â”€ name: { en: "Brand Brain", ko: "ë¸Œëœë“œ ë¸Œë ˆì¸" }
â”œâ”€â”€ description: { 
â”‚     en: "Configure your brand strategy...",
â”‚     ko: "ë¸Œëœë“œ ì „ëµì„ ì„¤ì •í•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤..."
â”‚   }
â”œâ”€â”€ tips: [
â”‚     {
â”‚       en: "Fill in Core Identity to define your brand",
â”‚       ko: "Core Identityì— ë¸Œëœë“œ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
â”‚     },
â”‚     {
â”‚       en: "Click 'Sync with Hive Mind' to push to agents",
â”‚       ko: "Sync ë²„íŠ¼ìœ¼ë¡œ Agentì— ë¸Œëœë“œ ì •ë³´ë¥¼ ì „íŒŒí•©ë‹ˆë‹¤"
â”‚     }
â”‚   ]
â”œâ”€â”€ isActive: true
â”œâ”€â”€ order: 2
â”œâ”€â”€ createdAt: Timestamp
â””â”€â”€ updatedAt: Timestamp
```

### 2.2 ê¸°ì¡´ ì±—ë´‡ ì„¤ì •
```
chatbotConfig/default
â”œâ”€â”€ systemPrompt: "..."
â”œâ”€â”€ welcomeMessage: "..."
â”œâ”€â”€ dailyLimit: 50
â”œâ”€â”€ status: "active"
â”œâ”€â”€ voiceEnabled: true          // ì‹ ê·œ
â”œâ”€â”€ voiceInputEnabled: true     // ì‹ ê·œ
â”œâ”€â”€ voiceOutputEnabled: true    // ì‹ ê·œ
â””â”€â”€ updatedAt: Timestamp
```

---

## 3. ê¸°ëŠ¥ ëª…ì„¸

### 3.1 ë“œë˜ê·¸ ê°€ëŠ¥í•œ FAB
- ë§ˆìš°ìŠ¤/í„°ì¹˜ë¡œ ë“œë˜ê·¸í•˜ì—¬ ìœ„ì¹˜ ë³€ê²½
- localStorageì— ìœ„ì¹˜ ì €ì¥: `chatbot_fab_position = { x, y }`
- í˜ì´ì§€ ì´ë™ ì‹œ ì €ì¥ëœ ìœ„ì¹˜ì—ì„œ ì‹œì‘
- ë”ë¸”í´ë¦­ ì‹œ ê¸°ë³¸ ìœ„ì¹˜(ìš°ì¸¡ í•˜ë‹¨)ë¡œ ë¦¬ì…‹
- í™”ë©´ ê²½ê³„ ì´íƒˆ ë°©ì§€

### 3.2 í˜ì´ì§€ ì»¨í…ìŠ¤íŠ¸ ì¸ì‹
- í˜„ì¬ í˜ì´ì§€ ìë™ ê°ì§€ (URL ê¸°ë°˜)
- Firestoreì—ì„œ í•´ë‹¹ í˜ì´ì§€ ì»¨í…ìŠ¤íŠ¸ ë¡œë“œ
- AI System Promptì— ì»¨í…ìŠ¤íŠ¸ ì£¼ì…
- "ì´ í˜ì´ì§€ì—ì„œ ë­˜ í•  ìˆ˜ ìˆì–´?" ì§ˆë¬¸ì— ë‹µë³€ ê°€ëŠ¥

### 3.3 ìŒì„± ê¸°ëŠ¥
- **STT (ìŒì„±â†’í…ìŠ¤íŠ¸)**: Web Speech API
- **TTS (í…ìŠ¤íŠ¸â†’ìŒì„±)**: Web Speech API
- ë§ˆì´í¬ ë²„íŠ¼(ğŸ¤)ìœ¼ë¡œ ìŒì„± ì…ë ¥
- ìŠ¤í”¼ì»¤ ë²„íŠ¼(ğŸ”Š)ìœ¼ë¡œ ì‘ë‹µ ì½ê¸°
- ì–¸ì–´: í•œêµ­ì–´/ì˜ì–´ ìë™ ê°ì§€

### 3.4 Admin UI
- Admin â†’ AI Chatbot â†’ "Page Context" íƒ­ ì¶”ê°€
- í˜ì´ì§€ë³„ ì´ë¦„, ì„¤ëª…, íŒ í¸ì§‘
- í™œì„±í™”/ë¹„í™œì„±í™” í† ê¸€
- ìŒì„± ê¸°ëŠ¥ ON/OFF ì„¤ì •

---

## 4. ì ìš© ëŒ€ìƒ í˜ì´ì§€

| # | í˜ì´ì§€ | pageId | ì„¤ëª… |
|---|--------|--------|------|
| 1 | command-center.html | command-center | í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œ |
| 2 | project-detail.html | project-detail | Mission Control |
| 3 | brand-brain.html | brand-brain | Brand Brain |
| 4 | knowledgeHub.html | knowledge-hub | Knowledge Hub |
| 5 | marketPulse.html | market-pulse | Market Pulse |
| 6 | strategyWarRoom.html | strategy-war-room | Strategy War Room |
| 7 | theFilter.html | the-filter | The Filter |
| 8 | theGrowth.html | the-growth | The Growth |
| 9 | studio.html | studio | Content Studio |

---

## 5. UI ë””ìì¸

### 5.1 FAB ë²„íŠ¼
```
        â”Œâ”€â”€â”€â”€â”€â”
        â”‚ ğŸ¤–  â”‚ â† ë“œë˜ê·¸ ê°€ëŠ¥
        â””â”€â”€â”€â”€â”€â”˜
         60x60px
         ê·¸ë¦¼ì íš¨ê³¼
         í˜¸ë²„ ì‹œ í™•ëŒ€
```

### 5.2 ì±—ë´‡ íŒ¨ë„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– ZYNK Assistant          [X]    â”‚
â”‚     AI í—¬í”„ë°ìŠ¤í¬      [0/50]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  [Bot] ì•ˆë…•í•˜ì„¸ìš”! í˜„ì¬ Brand Brain â”‚
â”‚  í˜ì´ì§€ì— ìˆìœ¼ì‹œë„¤ìš”. ë¸Œëœë“œ ì „ëµ   â”‚
â”‚  ì„¤ì •ì— ëŒ€í•´ ë¬¼ì–´ë³´ì„¸ìš”!            â”‚
â”‚                           [ğŸ”Š]     â”‚
â”‚                                     â”‚
â”‚  [User] Sync ë²„íŠ¼ì€ ë­ì•¼?           â”‚
â”‚                                     â”‚
â”‚  [Bot] Sync with Hive Mind ë²„íŠ¼ì€  â”‚
â”‚  Brand Brainì˜ ì •ë³´ë¥¼ ëª¨ë“  Agent   â”‚
â”‚  Teamì— ì „íŒŒí•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤...     â”‚
â”‚                           [ğŸ”Š]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” [ğŸ¤][â¤]   â”‚
â”‚  â”‚ ë©”ì‹œì§€ ì…ë ¥...     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. êµ¬í˜„ ìˆœì„œ

### Phase 1: ê¸°ë°˜ ì‘ì—…
- [x] Firestore ì»¬ë ‰ì…˜ ìƒì„± ìŠ¤í¬ë¦½íŠ¸ (seed-chatbot-context.html)
- [x] chatbot-v2.js ëª¨ë“ˆí™” (ì „ì—­ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ)

### Phase 2: FAB ë“œë˜ê·¸ ê¸°ëŠ¥
- [x] ë“œë˜ê·¸ ë¡œì§ ì¶”ê°€
- [x] localStorage ì €ì¥/ë³µì›
- [x] ë”ë¸”í´ë¦­ ë¦¬ì…‹
- [x] í™”ë©´ ê²½ê³„ ì²˜ë¦¬

### Phase 3: í˜ì´ì§€ ì»¨í…ìŠ¤íŠ¸
- [x] í˜ì´ì§€ ê°ì§€ ë¡œì§
- [x] Firestoreì—ì„œ ì»¨í…ìŠ¤íŠ¸ ë¡œë“œ
- [x] System Promptì— ì£¼ì…

### Phase 4: ìŒì„± ê¸°ëŠ¥
- [x] STT (ìŒì„± ì…ë ¥) êµ¬í˜„
- [x] TTS (ìŒì„± ì¶œë ¥) êµ¬í˜„
- [x] UI ë²„íŠ¼ ì¶”ê°€

### Phase 5: ì „ì—­ ë°°í¬
- [x] 8ê°œ í˜ì´ì§€ì— ì±—ë´‡ ì»´í¬ë„ŒíŠ¸ ì‚½ì…
- [x] Admin í˜ì´ì§€ ì œì™¸ í™•ì¸

### Phase 6: Admin UI
- [x] admin-chatbot.htmlì— Page Context íƒ­ ì¶”ê°€
- [x] CRUD ê¸°ëŠ¥ êµ¬í˜„

### Phase 7: ëŒ€í™” ê¸°ë¡ ìœ ì§€ (ì¶”ê°€)
- [x] localStorageì— ëŒ€í™” ê¸°ë¡ ì €ì¥
- [x] í˜ì´ì§€ ì´ë™ ì‹œ ê¸°ë¡ ë³µì›
- [x] 24ì‹œê°„ í›„ ìë™ ì‚­ì œ
- [x] í˜ì´ì§€ë³„ ì•ˆë‚´ ë©”ì‹œì§€ (ìƒˆ í˜ì´ì§€ ì§„ì… ì‹œ)

---

## 7. íŒŒì¼ ë³€ê²½ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| chatbot-v2.js | ë“œë˜ê·¸, í˜ì´ì§€ ì»¨í…ìŠ¤íŠ¸, ìŒì„± ê¸°ëŠ¥ |
| chatbot.css | ë“œë˜ê·¸ ì»¤ì„œ, ìŒì„± ë²„íŠ¼ ìŠ¤íƒ€ì¼ |
| admin-chatbot.html | Page Context íƒ­ ì¶”ê°€ |
| 8ê°œ HTML í˜ì´ì§€ | ì±—ë´‡ ì»´í¬ë„ŒíŠ¸ ì‚½ì… |
| seed-chatbot-context.js | ì´ˆê¸° ë°ì´í„° ì‹œë“œ |
| firestore.rules | chatbotPageContext ì½ê¸° ê¶Œí•œ |

---

*ë¬¸ì„œ ë*
