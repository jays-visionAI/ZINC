<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Inspect Profile Structure</title>
</head>

<body>
    <h1>Profile Inspector</h1>
    <pre id="output">Loading...</pre>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>

    <script>
        const output = document.getElementById('output');

        async function inspect() {
            try {
                if (!firebase.apps.length) {
                    output.textContent = 'Firebase not initialized!';
                    return;
                }

                const db = firebase.firestore();
                // Get just one document to see its structure
                const snapshot = await db.collection('runtimeProfiles').limit(1).get();

                if (snapshot.empty) {
                    output.textContent = 'No profiles found.';
                    return;
                }

                const doc = snapshot.docs[0];
                const data = doc.data();

                output.textContent = JSON.stringify({
                    id: doc.id,
                    data: data
                }, null, 2);

            } catch (error) {
                output.textContent = `Error: ${error.message}`;
            }
        }

        setTimeout(inspect, 1000);
    </script>
</body>

</html>