<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed Chatbot Page Context</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #0f172a;
            color: #f8fafc;
            padding: 40px;
        }

        h1 {
            color: #818cf8;
        }

        pre {
            background: #1e293b;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
        }

        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 8px 4px;
        }

        button:hover {
            background: #4f46e5;
        }

        button:disabled {
            background: #475569;
            cursor: not-allowed;
        }

        .success {
            color: #10b981;
        }

        .error {
            color: #ef4444;
        }

        #log {
            margin-top: 20px;
            padding: 16px;
            background: #1e293b;
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <h1>ü§ñ Seed Chatbot Page Context</h1>
    <p>Initialize page context data for the global chatbot feature.</p>

    <button id="btn-seed" onclick="seedPageContext()">Seed Page Context Data</button>
    <button id="btn-check" onclick="checkData()">Check Existing Data</button>
    <button id="btn-delete" onclick="deleteAll()">Delete All (Reset)</button>

    <div id="log"></div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>

    <script>
        function log(msg, type = 'info') {
            const el = document.getElementById('log');
            const colorClass = type === 'success' ? 'success' : type === 'error' ? 'error' : '';
            el.innerHTML += `<div class="${colorClass}">[${new Date().toLocaleTimeString()}] ${msg}</div>`;
            el.scrollTop = el.scrollHeight;
            console.log(msg);
        }

        // Page context seed data
        const PAGE_CONTEXTS = [
            {
                pageId: 'command-center',
                name: { en: 'Command Center', ko: 'Ïª§Îß®Îìú ÏÑºÌÑ∞' },
                description: {
                    en: 'Your main dashboard to manage all projects. Create new projects, monitor status, and access detailed controls.',
                    ko: 'Î™®Îì† ÌîÑÎ°úÏ†ùÌä∏Î•º Í¥ÄÎ¶¨ÌïòÎäî Î©îÏù∏ ÎåÄÏãúÎ≥¥ÎìúÏûÖÎãàÎã§. ÏÉà ÌîÑÎ°úÏ†ùÌä∏ ÏÉùÏÑ±, ÏÉÅÌÉú Î™®ÎãàÌÑ∞ÎßÅ, ÏÉÅÏÑ∏ Ïª®Ìä∏Î°§Ïóê Ï†ëÍ∑ºÌï† Ïàò ÏûàÏäµÎãàÎã§.'
                },
                tips: [
                    { en: 'Click "Add Project" to create a new project', ko: '"ÌîÑÎ°úÏ†ùÌä∏ Ï∂îÍ∞Ä" Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ ÏÉà ÌîÑÎ°úÏ†ùÌä∏Î•º ÎßåÎìúÏÑ∏Ïöî' },
                    { en: 'Click on a project card to open Mission Control', ko: 'ÌîÑÎ°úÏ†ùÌä∏ Ïπ¥ÎìúÎ•º ÌÅ¥Î¶≠ÌïòÎ©¥ Mission ControlÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§' },
                    { en: 'Project status badges show health at a glance', ko: 'ÌîÑÎ°úÏ†ùÌä∏ ÏÉÅÌÉú Î∞∞ÏßÄÎ°ú ÏÉÅÌÉúÎ•º ÌïúÎààÏóê ÌååÏïÖÌï† Ïàò ÏûàÏäµÎãàÎã§' }
                ],
                order: 1,
                isActive: true
            },
            {
                pageId: 'project-detail',
                name: { en: 'Mission Control', ko: 'ÎØ∏ÏÖò Ïª®Ìä∏Î°§' },
                description: {
                    en: 'The central command hub for your project. Manage Agent Teams, view analytics, and control all aspects of your marketing automation.',
                    ko: 'ÌîÑÎ°úÏ†ùÌä∏Ïùò Ï§ëÏïô Ï†úÏñ¥ ÌóàÎ∏åÏûÖÎãàÎã§. Agent Team Í¥ÄÎ¶¨, Î∂ÑÏÑù Î≥¥Í∏∞, ÎßàÏºÄÌåÖ ÏûêÎèôÌôîÏùò Î™®Îì† Ï∏°Î©¥ÏùÑ Ï†úÏñ¥Ìï† Ïàò ÏûàÏäµÎãàÎã§.'
                },
                tips: [
                    { en: 'Agent Team cards show live status and actions', ko: 'Agent Team Ïπ¥ÎìúÏóêÏÑú Ïã§ÏãúÍ∞Ñ ÏÉÅÌÉúÏôÄ Ïï°ÏÖòÏùÑ Î≥º Ïàò ÏûàÏäµÎãàÎã§' },
                    { en: 'Click "Run Now" to execute an agent immediately', ko: '"Run Now"Î•º ÌÅ¥Î¶≠ÌïòÎ©¥ ÏóêÏù¥Ï†ÑÌä∏Í∞Ä Ï¶âÏãú Ïã§ÌñâÎê©ÎãàÎã§' },
                    { en: 'Use "Schedule" to set up automated posting', ko: '"Schedule"Î°ú ÏûêÎèô Ìè¨Ïä§ÌåÖÏùÑ ÏÑ§Ï†ïÌï† Ïàò ÏûàÏäµÎãàÎã§' },
                    { en: 'Click on an Agent Team card to see sub-agents', ko: 'Agent Team Ïπ¥ÎìúÎ•º ÌÅ¥Î¶≠ÌïòÎ©¥ ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏Î•º Î≥º Ïàò ÏûàÏäµÎãàÎã§' }
                ],
                order: 2,
                isActive: true
            },
            {
                pageId: 'brand-brain',
                name: { en: 'Brand Brain', ko: 'Î∏åÎûúÎìú Î∏åÎ†àÏù∏' },
                description: {
                    en: 'Configure your brand identity, voice, and strategy. This information is synced to all your AI agents for consistent brand messaging.',
                    ko: 'Î∏åÎûúÎìú ÏïÑÏù¥Îç¥Ìã∞Ìã∞, Î≥¥Ïù¥Ïä§, Ï†ÑÎûµÏùÑ ÏÑ§Ï†ïÌï©ÎãàÎã§. Ïù¥ Ï†ïÎ≥¥Îäî Î™®Îì† AI ÏóêÏù¥Ï†ÑÌä∏Ïóê ÎèôÍ∏∞ÌôîÎêòÏñ¥ ÏùºÍ¥ÄÎêú Î∏åÎûúÎìú Î©îÏãúÏßÄÎ•º Ï†ÑÎã¨Ìï©ÎãàÎã§.'
                },
                tips: [
                    { en: 'Fill in Core Identity with your brand basics', ko: 'Core IdentityÏóê Î∏åÎûúÎìú Í∏∞Î≥∏ Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî' },
                    { en: 'Set Brand Voice tags to define your tone', ko: 'Brand Voice ÌÉúÍ∑∏Î°ú ÌÜ§Ïï§Îß§ÎÑàÎ•º Ï†ïÏùòÌïòÏÑ∏Ïöî' },
                    { en: 'Add Do\'s and Don\'ts for content guidelines', ko: 'Do\'s & Don\'tsÎ°ú ÏΩòÌÖêÏ∏† Í∞ÄÏù¥ÎìúÎùºÏù∏ÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî' },
                    { en: 'Click "Sync with Hive Mind" to push to agents', ko: '"Sync with Hive Mind"Î•º ÌÅ¥Î¶≠ÌïòÎ©¥ ÏóêÏù¥Ï†ÑÌä∏Ïóê Ï†ÑÌååÎê©ÎãàÎã§' },
                    { en: 'Use the clock icon to schedule auto-sync', ko: 'ÏãúÍ≥Ñ ÏïÑÏù¥ÏΩòÏúºÎ°ú ÏûêÎèô ÎèôÍ∏∞ÌôîÎ•º ÏòàÏïΩÌï† Ïàò ÏûàÏäµÎãàÎã§' }
                ],
                order: 3,
                isActive: true
            },
            {
                pageId: 'knowledge-hub',
                name: { en: 'Knowledge Hub', ko: 'ÏßÄÏãù ÌóàÎ∏å' },
                description: {
                    en: 'Store and manage brand knowledge, documents, and reference materials that AI agents can use for content creation.',
                    ko: 'AI ÏóêÏù¥Ï†ÑÌä∏Í∞Ä ÏΩòÌÖêÏ∏† ÏÉùÏÑ±Ïóê ÌôúÏö©Ìï† Ïàò ÏûàÎäî Î∏åÎûúÎìú ÏßÄÏãù, Î¨∏ÏÑú, Ï∞∏Í≥† ÏûêÎ£åÎ•º Ï†ÄÏû•ÌïòÍ≥† Í¥ÄÎ¶¨Ìï©ÎãàÎã§.'
                },
                tips: [
                    { en: 'Upload documents for AI to reference', ko: 'AIÍ∞Ä Ï∞∏Ï°∞Ìï† Î¨∏ÏÑúÎ•º ÏóÖÎ°úÎìúÌïòÏÑ∏Ïöî' },
                    { en: 'Add website links for automatic analysis', ko: 'ÏûêÎèô Î∂ÑÏÑùÏùÑ ÏúÑÌï¥ ÏõπÏÇ¨Ïù¥Ìä∏ ÎßÅÌÅ¨Î•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî' },
                    { en: 'Create notes with key brand information', ko: 'ÌïµÏã¨ Î∏åÎûúÎìú Ï†ïÎ≥¥Î•º ÎÖ∏Ìä∏Î°ú ÏûëÏÑ±ÌïòÏÑ∏Ïöî' }
                ],
                order: 4,
                isActive: true
            },
            {
                pageId: 'market-pulse',
                name: { en: 'Market Pulse', ko: 'ÎßàÏºì ÌéÑÏä§' },
                description: {
                    en: 'Monitor market trends, competitor activity, and industry news in real-time.',
                    ko: 'ÏãúÏû• Ìä∏Î†åÎìú, Í≤ΩÏüÅÏÇ¨ ÌôúÎèô, ÏóÖÍ≥Ñ Îâ¥Ïä§Î•º Ïã§ÏãúÍ∞ÑÏúºÎ°ú Î™®ÎãàÌÑ∞ÎßÅÌï©ÎãàÎã§.'
                },
                tips: [
                    { en: 'View trending topics in your industry', ko: 'ÏóÖÍ≥ÑÏùò Ìä∏Î†åÎî© ÌÜ†ÌîΩÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî' },
                    { en: 'Track competitor mentions and sentiment', ko: 'Í≤ΩÏüÅÏÇ¨ Î©òÏÖòÍ≥º Í∞êÏÑ±ÏùÑ Ï∂îÏ†ÅÌïòÏÑ∏Ïöî' },
                    { en: 'Use insights to inform your content strategy', ko: 'Ïù∏ÏÇ¨Ïù¥Ìä∏Î•º ÏΩòÌÖêÏ∏† Ï†ÑÎûµÏóê ÌôúÏö©ÌïòÏÑ∏Ïöî' }
                ],
                order: 5,
                isActive: true
            },
            {
                pageId: 'strategy-war-room',
                name: { en: 'Strategy War Room', ko: 'Ï†ÑÎûµ ÏÉÅÌô©Ïã§' },
                description: {
                    en: 'Plan and execute marketing campaigns with AI-powered recommendations and performance tracking.',
                    ko: 'AI Í∏∞Î∞ò Ï∂îÏ≤úÍ≥º ÏÑ±Í≥º Ï∂îÏ†ÅÏúºÎ°ú ÎßàÏºÄÌåÖ Ï∫†ÌéòÏù∏ÏùÑ Í≥ÑÌöçÌïòÍ≥† Ïã§ÌñâÌï©ÎãàÎã§.'
                },
                tips: [
                    { en: 'Create campaign objectives and KPIs', ko: 'Ï∫†ÌéòÏù∏ Î™©ÌëúÏôÄ KPIÎ•º ÏÑ§Ï†ïÌïòÏÑ∏Ïöî' },
                    { en: 'Get AI recommendations for content topics', ko: 'AIÏóêÍ≤å ÏΩòÌÖêÏ∏† Ï£ºÏ†ú Ï∂îÏ≤úÏùÑ Î∞õÏúºÏÑ∏Ïöî' },
                    { en: 'Track campaign performance in real-time', ko: 'Ï∫†ÌéòÏù∏ ÏÑ±Í≥ºÎ•º Ïã§ÏãúÍ∞ÑÏúºÎ°ú Ï∂îÏ†ÅÌïòÏÑ∏Ïöî' }
                ],
                order: 6,
                isActive: true
            },
            {
                pageId: 'the-filter',
                name: { en: 'The Filter', ko: 'Îçî ÌïÑÌÑ∞' },
                description: {
                    en: 'Review and approve AI-generated content before publishing. Edit, approve, or reject content suggestions.',
                    ko: 'Í≤åÏãú Ï†ÑÏóê AIÍ∞Ä ÏÉùÏÑ±Ìïú ÏΩòÌÖêÏ∏†Î•º Í≤ÄÌÜ†ÌïòÍ≥† ÏäπÏù∏Ìï©ÎãàÎã§. ÏΩòÌÖêÏ∏† Ï†úÏïàÏùÑ Ìé∏Ïßë, ÏäπÏù∏ ÎòêÎäî Í±∞Î∂ÄÌï† Ïàò ÏûàÏäµÎãàÎã§.'
                },
                tips: [
                    { en: 'Review pending content in the queue', ko: 'ÎåÄÍ∏∞ Ï§ëÏù∏ ÏΩòÌÖêÏ∏†Î•º Í≤ÄÌÜ†ÌïòÏÑ∏Ïöî' },
                    { en: 'Edit content before approving', ko: 'ÏäπÏù∏ Ï†ÑÏóê ÏΩòÌÖêÏ∏†Î•º Ìé∏ÏßëÌï† Ïàò ÏûàÏäµÎãàÎã§' },
                    { en: 'Approve to publish immediately or schedule', ko: 'ÏäπÏù∏ÌïòÎ©¥ Ï¶âÏãú Í≤åÏãúÎêòÍ±∞ÎÇò ÏòàÏïΩÎê©ÎãàÎã§' }
                ],
                order: 7,
                isActive: true
            },
            {
                pageId: 'the-growth',
                name: { en: 'The Growth', ko: 'Îçî Í∑∏Î°úÏä§' },
                description: {
                    en: 'Track your social media growth metrics, engagement analytics, and ROI across all channels.',
                    ko: 'ÏÜåÏÖú ÎØ∏ÎîîÏñ¥ ÏÑ±Ïû• ÏßÄÌëú, Ï∞∏Ïó¨ Î∂ÑÏÑù, Î™®Îì† Ï±ÑÎÑêÏùò ROIÎ•º Ï∂îÏ†ÅÌï©ÎãàÎã§.'
                },
                tips: [
                    { en: 'View follower growth trends', ko: 'ÌåîÎ°úÏõå ÏÑ±Ïû• Ï∂îÏù¥Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî' },
                    { en: 'Analyze engagement rates by content type', ko: 'ÏΩòÌÖêÏ∏† Ïú†ÌòïÎ≥Ñ Ï∞∏Ïó¨Ïú®ÏùÑ Î∂ÑÏÑùÌïòÏÑ∏Ïöî' },
                    { en: 'Compare performance across platforms', ko: 'ÌîåÎû´Ìèº Í∞Ñ ÏÑ±Í≥ºÎ•º ÎπÑÍµêÌïòÏÑ∏Ïöî' }
                ],
                order: 8,
                isActive: true
            },
            {
                pageId: 'studio',
                name: { en: 'Studio', ko: 'Ïä§ÌäúÎîîÏò§' },
                description: {
                    en: 'Create and customize content with AI assistance. Design posts, images, and campaigns with advanced tools.',
                    ko: 'AIÏùò ÎèÑÏõÄÏúºÎ°ú ÏΩòÌÖêÏ∏†Î•º ÏÉùÏÑ±ÌïòÍ≥† Ïª§Ïä§ÌÑ∞ÎßàÏù¥Ï¶àÌï©ÎãàÎã§. Í≥†Í∏â ÎèÑÍµ¨Î°ú Ìè¨Ïä§Ìä∏, Ïù¥ÎØ∏ÏßÄ, Ï∫†ÌéòÏù∏ÏùÑ ÎîîÏûêÏù∏Ìï©ÎãàÎã§.'
                },
                tips: [
                    { en: 'Select a workflow template to start', ko: 'ÏõåÌÅ¨ÌîåÎ°úÏö∞ ÌÖúÌîåÎ¶øÏùÑ ÏÑ†ÌÉùÌïòÏó¨ ÏãúÏûëÌïòÏÑ∏Ïöî' },
                    { en: 'Configure each agent step in the pipeline', ko: 'ÌååÏù¥ÌîÑÎùºÏù∏Ïùò Í∞Å ÏóêÏù¥Ï†ÑÌä∏ Îã®Í≥ÑÎ•º Íµ¨ÏÑ±ÌïòÏÑ∏Ïöî' },
                    { en: 'Preview content before running the full workflow', ko: 'Ï†ÑÏ≤¥ ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ïã§Ìñâ Ï†ÑÏóê ÏΩòÌÖêÏ∏†Î•º ÎØ∏Î¶¨Î≥¥Í∏∞ÌïòÏÑ∏Ïöî' }
                ],
                order: 9,
                isActive: true
            }
        ];

        async function seedPageContext() {
            const btn = document.getElementById('btn-seed');
            btn.disabled = true;

            log('üöÄ Starting page context seeding...');

            try {
                const db = firebase.firestore();
                const batch = db.batch();

                for (const context of PAGE_CONTEXTS) {
                    const ref = db.collection('chatbotPageContext').doc(context.pageId);
                    batch.set(ref, {
                        ...context,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    log(`  üìÑ Prepared: ${context.pageId}`, 'info');
                }

                await batch.commit();
                log(`‚úÖ Successfully seeded ${PAGE_CONTEXTS.length} page contexts!`, 'success');

            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            } finally {
                btn.disabled = false;
            }
        }

        async function checkData() {
            log('üîç Checking existing data...');

            try {
                const db = firebase.firestore();
                const snapshot = await db.collection('chatbotPageContext').get();

                if (snapshot.empty) {
                    log('‚ö†Ô∏è No page context data found. Click "Seed" to create.', 'info');
                } else {
                    log(`üìä Found ${snapshot.size} page contexts:`, 'success');
                    snapshot.forEach(doc => {
                        const data = doc.data();
                        log(`  ‚Ä¢ ${doc.id}: ${data.name?.en || 'No name'}`, 'info');
                    });
                }
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            }
        }

        async function deleteAll() {
            if (!confirm('Are you sure you want to delete all page context data?')) return;

            log('üóëÔ∏è Deleting all page context data...');

            try {
                const db = firebase.firestore();
                const snapshot = await db.collection('chatbotPageContext').get();

                const batch = db.batch();
                snapshot.forEach(doc => {
                    batch.delete(doc.ref);
                });

                await batch.commit();
                log(`‚úÖ Deleted ${snapshot.size} documents`, 'success');

            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            }
        }

        // Wait for auth
        firebase.auth().onAuthStateChanged(user => {
            if (user) {
                log(`üë§ Logged in as: ${user.email}`, 'success');
            } else {
                log('‚ö†Ô∏è Not logged in. Some operations may fail.', 'info');
            }
        });
    </script>
</body>

</html>