<!DOCTYPE html>
<html>

<head>
    <title>Agent Migration Tool</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        body {
            background: #0a0a0a;
            color: #fff;
            font-family: system-ui;
            padding: 40px;
        }

        button {
            background: #16e0bd;
            color: #000;
            border: none;
            padding: 16px 32px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 8px;
        }

        button:hover {
            background: #0fc9a7;
        }

        #log {
            background: #1a1a1a;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>

<body>
    <h1>ğŸš€ Agent Registry Migration Tool</h1>
    <p>Standard Agent Profiles â†’ Agent Registry ë§ˆì´ê·¸ë ˆì´ì…˜</p>
    <button onclick="runMigration()">â–¶ï¸ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰</button>
    <div id="log">ëŒ€ê¸° ì¤‘...</div>

    <script>
        function log(msg) {
            document.getElementById('log').textContent += '\n' + msg;
        }

        async function runMigration() {
            log('ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘...');

            const agents = [
                { id: 'research', name: 'Market Research Specialist', category: 'Intelligence', desc: 'Analyzes market trends and competitor activities.', prompt: 'You are a research specialist focused on market analysis and trend identification.\n\nYour responsibilities:\n- Analyze the content plan and identify key themes\n- Research relevant industry trends and data\n- Provide comprehensive background information\n- Identify competitor activities and best practices\n\nAlways cite sources when possible and focus on actionable insights.', temp: 0.5 },
                { id: 'seo_watcher', name: 'SEO & Keyword Watcher', category: 'Intelligence', desc: 'Monitors search performance and discovers keyword opportunities.', prompt: 'You are an SEO specialist monitoring and optimizing content performance.\n\nYour responsibilities:\n- Analyze keyword opportunities and trends\n- Monitor search rankings and traffic patterns\n- Recommend SEO improvements for content\n- Track competitor SEO strategies\n\nFocus on data-driven recommendations with specific action items.', temp: 0.4 },
                { id: 'planner', name: 'Content Strategy Planner', category: 'Strategy', desc: 'Designs strategic content calendars and publishing schedules.', prompt: 'You are a strategic content planner responsible for campaign design.\n\nYour responsibilities:\n- Design content calendars and publishing schedules\n- Align content with business objectives\n- Define target audiences and messaging\n- Coordinate across channels for maximum impact\n\nThink strategically about timing, sequencing, and audience engagement.', temp: 0.6 },
                { id: 'creator_text', name: 'Text Content Creator', category: 'Design', desc: 'Generates high-conversion copy for multi-channel assets.', prompt: 'You are an expert content creator specializing in compelling written content.\n\nYour responsibilities:\n- Write engaging captions, posts, and articles\n- Adapt tone and style for different platforms\n- Incorporate brand voice and messaging\n- Optimize content for engagement\n\nCreate content that resonates with the target audience and drives action.', temp: 0.7 },
                { id: 'creator_image', name: 'Visual Concept Creator', category: 'Design', desc: 'Designs visual assets and generates AI image prompts.', prompt: 'You are a visual content specialist creating image prompts and concepts.\n\nYour responsibilities:\n- Generate detailed image generation prompts\n- Design visual concepts aligned with brand\n- Specify composition, style, and mood\n- Ensure visual consistency across content\n\nThink visually and provide clear, detailed specifications.', temp: 0.8 },
                { id: 'creator_video', name: 'Video Script Specialist', category: 'Design', desc: 'Focuses on short-form video scripts and storytelling.', prompt: 'You are a video content specialist creating scripts and video concepts.\n\nYour responsibilities:\n- Write video scripts and storyboards\n- Design short-form video concepts\n- Specify visual and audio elements\n- Optimize for platform requirements\n\nCreate engaging video content that captures attention quickly.', temp: 0.7 },
                { id: 'compliance', name: 'Compliance Watchdog', category: 'QA', desc: 'Ensures brand safety and regulatory adherence.', prompt: 'You are a content compliance specialist ensuring brand safety.\n\nYour responsibilities:\n- Review content for brand guideline adherence\n- Check for regulatory compliance\n- Verify facts and claims accuracy\n- Flag potential legal or PR risks\n\nBe thorough and document all concerns clearly.', temp: 0.3 },
                { id: 'evaluator', name: 'Quality Evaluator', category: 'QA', desc: 'Scores content effectiveness against KPIs.', prompt: 'You are a quality evaluator scoring content effectiveness.\n\nYour responsibilities:\n- Assess content quality and engagement potential\n- Score against defined KPIs and criteria\n- Provide improvement recommendations\n- Benchmark against best practices\n\nUse objective criteria and provide specific feedback.', temp: 0.4 },
                { id: 'publisher', name: 'Cross-Platform Publisher', category: 'Studio', desc: 'Optimizes asset formatting and oversees delivery.', prompt: 'You are a publishing specialist managing content distribution.\n\nYour responsibilities:\n- Format content for each platform\n- Optimize posting times and schedules\n- Manage hashtags and metadata\n- Ensure proper asset formatting\n\nFocus on maximizing reach and engagement through proper publishing.', temp: 0.5 },
                { id: 'knowledge_curator', name: 'Knowledge Hub Curator', category: 'Intelligence', desc: 'Maintains brand memory and knowledge assets.', prompt: 'You are a knowledge management specialist maintaining brand memory.\n\nYour responsibilities:\n- Curate and organize brand knowledge\n- Update content performance insights\n- Maintain consistent brand guidelines\n- Archive and retrieve relevant content\n\nKeep information organized, accurate, and accessible.', temp: 0.4 },
                { id: 'manager', name: 'Project Orchestrator', category: 'Management', desc: 'Coordinates agent activities and final approvals.', prompt: 'You are a team manager coordinating agent activities.\n\nYour responsibilities:\n- Orchestrate agent workflows\n- Final approval on content decisions\n- Resolve conflicts and prioritize tasks\n- Ensure quality and timeline adherence\n\nMake decisive judgments and maintain workflow efficiency.', temp: 0.5 },
                { id: 'router', name: 'Task Intelligence Router', category: 'Management', desc: 'Directs tasks to specialized agents.', prompt: 'You are a routing specialist directing tasks to appropriate agents.\n\nYour responsibilities:\n- Analyze incoming requests and content\n- Route tasks to most suitable agents\n- Balance workload across the team\n- Optimize processing efficiency\n\nMake quick, accurate routing decisions.', temp: 0.3 }
            ];

            try {
                const db = firebase.firestore();
                const batch = db.batch();
                const ts = firebase.firestore.FieldValue.serverTimestamp();

                for (const agent of agents) {
                    log(`ğŸ“¦ ë“±ë¡ ì¤‘: ${agent.name}`);

                    // Registry Entry
                    const regRef = db.collection('agentRegistry').doc(agent.id);
                    batch.set(regRef, {
                        id: agent.id,
                        name: agent.name,
                        category: agent.category,
                        description: agent.desc,
                        status: 'active',
                        currentProductionVersion: '1.0.0',
                        sourceFiles: ['services/agent-execution-service.js'],
                        updatedAt: ts
                    }, { merge: true });

                    // Version Entry
                    const verRef = db.collection('agentVersions').doc(agent.id + '-v1-0-0');
                    batch.set(verRef, {
                        agentId: agent.id,
                        version: '1.0.0',
                        status: 'production',
                        isProduction: true,
                        systemPrompt: agent.prompt,
                        config: { model: 'deepseek-chat', temperature: agent.temp },
                        procedures: [
                            { step: 1, action: 'init', label: 'Initialize', description: 'Setup context and role' },
                            { step: 2, action: 'execute', label: 'Execute Task', description: agent.desc },
                            { step: 3, action: 'finalize', label: 'Finalize Output', description: 'Clean and format result' }
                        ],
                        changelog: 'Migrated from Standard Agent Profiles',
                        createdAt: ts
                    }, { merge: true });
                }

                await batch.commit();
                log('\nâœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ! 12ê°œ ì—ì´ì „íŠ¸ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                log('\nğŸ‘‰ admin-registry.html í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”!');

            } catch (error) {
                log('\nâŒ ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
                console.error(error);
            }
        }
    </script>
</body>

</html>